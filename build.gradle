plugins {
    id 'fr.brouillard.oss.gradle.jgitver' version '0.3.1'
}

subprojects {
    repositories {
        mavenCentral()
    }

    apply plugin: 'java'
    apply plugin: 'eclipse'

    sourceCompatibility = 1.8
    targetCompatibility = 1.8

    dependencies {
        testCompile 'org.mockito:mockito-core:1.10.19'
        testCompile 'org.hamcrest:hamcrest-library:1.3'
        testCompile('org.testng:testng:6.9.9') {
            exclude group: 'junit'
        }
    }

    tasks.withType(Test) {
        useTestNG()
    }

    jar {
        doFirst {
            manifest {
                manifest.attributes 'X-GIT-SHA1': "$project.ext.git_sha1_full"
            }
        }
    }

    jgitver {
        mavenLike true
    }
}
